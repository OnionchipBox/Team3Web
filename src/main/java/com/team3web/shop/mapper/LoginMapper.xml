<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

	<mapper namespace="com.team3web.shop.mapper.LoginMapper">
	
	<select id="loginCheck" parameterType="UserVO" resultType="int">
		SELECT COUNT(*) FROM shop_user
		WHERE id = #{id} AND password = #{password}
	</select>
	
	<!-- 아이디 찾기 -->
	<select id="idFind" parameterType="UserVO" resultType="String">
		SELECT id
		FROM shop_user
		WHERE
        name=#{name} AND phone=#{phone}
	</select>
	
	<!-- 비밀번호 찾기 -->
	<select id="pwFind" parameterType="UserVO" resultType="String">
		SELECT password 
		FROM shop_user
		WHERE
        id=#{id} AND name=#{name}
	</select>
	
	<!-- 회원 상세보기 -->
	<select id="viewUser" resultType="UserVO" parameterType="String">
		SELECT 
			id, name 
		FROM shop_user 
		WHERE 
			id = #{id}
	</select>
	
	<!-- 회원 등급 상세보기 -->
	<select id="viewUserRole" resultType="UserRoleVO" parameterType="String">
		SELECT 
			id_count,id,role 
		FROM shop_user_role
		WHERE 
			id = #{id}
	</select>
	
	<!-- 비밀번호 바꾸기 -->
	<update id="updatePw" parameterType="UserVO">
		UPDATE shop_user 
		SET
			password=#{password}
		WHERE
			id=#{id}
	</update>
</mapper>